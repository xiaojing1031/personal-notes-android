### Retrofit
默认步骤：
1. 创建一个Api接口
2. 创建Retrofit实例
3. 创建Api接口实例
4. 调用Api接口方法，生成Call
5. 通过Call发起同步或异步请求，然后获取返回结果Response

结合Kotlin协程和Moshi
Retrofit + OkHttp + Moshi (Json/Gson)
```
- Api接口 & 实例方法
interface UserApi {
    @Get("user/login")
    suspend fun getUser(): Response<UserResp>
    
    fun create(): UserApi {
        return BaseApi.retrofitInstance.create(UserApi::class.java)
    }
}

```
```
-  UserResp数据：Moshi
@JsonClass(generateAdapter = true)
data class UserResp (
    @Json(name = "userId")
    val userId: String?,
    
    @Json(name = "userName")
    val userName: String?
)
```
```
- Retrofit实例
Object BaseApi {
    val retrofitInstance 
        = Retrofit.Builder()
            .baseUrl("https:...")
            // Moshi maps json to classes
            .addConverterFactory(MoshiConverterFactory.create())
            // The call adapter handles threads
            .addCallAdapterFactory(CoroutineCallAdapterFactory())
            .client(okHttpClient)
            .build()
}
    
}
```
```
- 发起请求，并获得Response
val userData = UserApi.create().getUser().body()
```

### 主要模块
- retrofit-adapter
- retrofit-converters
- retrofit：3个接口的默认实现
| Call | 网络请求执行器，用于执行同步或异步的网络请求；内部默认通过OkHttp的Call发起网络请求 |
| CallAdapter | 网络请求适配器，用于吧默认的网络请求执行器的调用形式，适配成在不同平台下的网络请求执行器的调用形式；Rotrofit默认Call；RxjavaCallAdapter添加后，默认为Observable或Flowable |
| Converter | 数据转换器，双向；Api接口方法的参数注解的值和网络请求执行器需要的数据类型之间的转换|
- retrofit-mock

